{"tags":[{"name":"CSS","permalink":"http://lingyu.wang/tags/CSS/","url":"/async/tags/CSS.json","count":35},{"name":"HTML","permalink":"http://lingyu.wang/tags/HTML/","url":"/async/tags/HTML.json","count":29}],"categories":[{"name":"思考总结","permalink":"http://lingyu.wang/categories/思考总结/","url":"/async/categories/思考总结.json","count":7}],"url":"/async/posts/2014/03/05/new-page.json","date":1393948800000,"path":{"year":2014,"month":3,"day":5,"name":"new-page"},"subtitle":"记录一下重写博客页面的过程","title":"博客换页面了","permalink":"http://lingyu.wang/2014/03/05/new-page/","content":"<p>上一篇文章是2月28日，今天这篇3月5日才写。中间隔了这么久，两天一篇的计划又被抛弃了。得加紧赶上了。这段时间还是做了点事的，不过没有记录上。</p>\n<a id=\"more\"></a>\n<h2 id=\"起因\">起因</h2><p>如果之前看过这个博客的人一定会发现，整个页面焕然一新了。之前用的是html5up-striped的模板。虽然浏览器兼容性很好，但无论是背景纹理的图片大小还是为了那兼容性所使用的响应式库的大小都让这个搭载在github上的博客肝颤（背景纹理两张分别为60k+，skelton的js有41k+还有50k+的CSS以及好几百K的字体…）。加载速度简直让我这种强迫症患者有种砸电脑的感觉。同时使用别人的代码，自己也不好修改，不好扩展，不好发挥。于是乎就决定自己写一个响应式的页面出来。这个页面就出来了。</p>\n<h2 id=\"参考\">参考</h2><p>这个页面是参考了<a href=\"http://www.csszengarden.com/220//\" target=\"_blank\" rel=\"external\">CSS禅意花园的220号作品</a>。不过CSS文件并不是照搬他的，都是自己重写的（压缩后的大小8KB）。不过用了它的两个图片（都很小，2.79K+1.77K）。之前也是使用了禅意花园上的那种“文字配合mask-image”的形式，后来发现除了Chrome都不兼容（我勒个血槽，连FF都不兼容）于是乎就转而去网上寻找纹理。在一个非常不错的纹理网站<a href=\"http://subtlepatterns.com/\" target=\"_blank\" rel=\"external\">Subtle Patterns</a> 上找到了两个纹理，分别作为博客中的背景以及文章中代码块的背景（一个113B，一个128B，注意是B不是KB），简直爽歪歪。瞬间感觉之前的60K的背景纹理就是渣渣啊。于是乎就剩jQuery比较大了，但是jQuery可以放在CDN上，这里使用的是百度提供的CDN（速度杠杠的，400ms）。如果后续有时间，我会抛弃jQuery，重写博客中的JS部分，这样就更快了（其实压根就没有几行js代码）</p>\n<h2 id=\"设计\">设计</h2><p>这个页面的设计也是<a href=\"http://lingyu.wang#/art/blog/2014/02/14/responsive-web-design/\">响应式设计</a>的<a href=\"http://lingyu.wang#/art/blog/2014/02/25/design-strategies/\">移动先行策略</a>的产物。贯彻其从小到大的方针。</p>\n<h3 id=\"小视口出发\">小视口出发</h3><p>从小型视口出发（这里我定义的小型视口是宽度小于768px的视口，准确来说是48em，font-size为初始的16px，为什么呢，因为我的ipad mini竖屏分辨率是768…）。定义了一套布局，最上面是header，里面有主要导航条，下面是内容，再下面是一些其他链接（以后成为侧边栏），再下面是footer</p>\n<p>于是乎格式就变成了html文档大概就会变成这个样子：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"title\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"wrapper\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"title\">header</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"header\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"banner\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"title\">nav</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">nav</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"title\">article</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"title\">header</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"content\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"title\">article</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"post\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"title\">header</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">header</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"main\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"title\">a</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"to-detail\"</span> <span class=\"attribute\">href</span>=<span class=\"value\">\"#\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">a</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"tags\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"title\">article</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"title\">aside</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"aside\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"title\">section</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"recent\"</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"title\">h3</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">h3</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"title\">div</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"inner\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"title\">section</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"title\">aside</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"title\">footer</span> <span class=\"attribute\">class</span>=<span class=\"value\">\"footer\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"title\">footer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"title\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"title\">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>这里先用了几个语义化元素，header、nav、section、footer、article还有aside。另外我喜欢用一个wrapper包裹所有内容，方便以后有需要的时候布局</p>\n<p>其中article的内容从上到下排布就好，所以我这里设定了<figure class=\"highlight\"><figcaption><span>class=\"to-detail\" href=\"#\">```为```display:block```，其他在结构上基本上保持了原样</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#10;&#23567;&#35270;&#21475;&#35774;&#22791;&#19978;&#30340;&#32477;&#22823;&#37096;&#20998;&#20869;&#23481;&#37117;&#26159;&#24456;&#30452;&#35266;&#30340;&#26174;&#31034;&#30340;&#65292;&#20063;&#19981;&#29992;&#35848;&#22826;&#22810;&#30340;&#24067;&#23616;&#65292;&#25226;&#19968;&#20123;&#22522;&#30784;&#30340;&#23637;&#29616;&#25928;&#26524;&#30340;css&#21152;&#36827;&#21435;&#23601;&#22909;&#65292;&#20027;&#35201;&#23601;&#26159;&#25511;&#21046;h1~h6&#30340;&#25991;&#23383;&#22823;&#23567;&#65288;&#19978;&#19979;margin&#65289;&#65292;&#25991;&#23383;&#39068;&#33394;&#65292;&#32972;&#26223;&#39068;&#33394;&#31561;&#31561;&#10;&#10;&#22823;&#33268;&#19978;&#36798;&#21040;&#30340;&#25928;&#26524;&#65306;&#10;&#10;###&#20013;&#35270;&#21475;&#30340;&#25193;&#23637;&#10;&#20013;&#35270;&#21475;&#35774;&#22791;&#22522;&#26412;&#19978;&#21644;&#23567;&#35270;&#21475;&#35774;&#22791;&#24046;&#19981;&#22810;&#65292;&#25105;&#36825;&#37324;&#21482;&#19981;&#36807;&#22312;aside&#37324;&#38754;&#30340;&#20869;&#23481;&#20316;&#20102;&#19968;&#20123;&#21464;&#21270;&#65292;&#21516;&#26102;&#22312;&#20027;&#39029;&#19978;&#25289;&#20986;&#19968;&#20010;&#20391;&#36793;&#26639;&#29992;&#20110;&#26174;&#31034;&#8220;&#26597;&#30475;&#35814;&#32454;&#8221;&#25353;&#38062;&#10;&#10;&#36825;&#26679;&#23601;&#38656;&#35201;&#28155;&#21152;&#19968;&#20123;&#24067;&#23616;&#36827;&#21435;&#20102;&#65292;&#36825;&#37324;&#37117;&#37319;&#29992;&#20102;&#24456;&#31616;&#21333;&#30340;&#24067;&#23616;&#65292;&#22522;&#26412;&#19978;&#23601;&#26159;float+BFC&#65292;&#20445;&#35777;&#28014;&#21160;&#20803;&#32032;&#19982;&#38750;&#28014;&#21160;&#20803;&#32032;&#19981;&#37325;&#21472;&#10;&#10;&#20110;&#26159;&#20046;&#31616;&#21333;&#30340;&#24067;&#23616;&#20195;&#30721;&#22914;&#19979;&#10;```css&#10;@media screen and (min-width: 48em) &#123;&#10;    .content .post .to-detail &#123;width: 18%; overflow: hidden&#125;&#10;    .content .post .main &#123;float:left;width: 80%; &#125;&#10;    .content .post .tags &#123;clear:both&#125;&#10;    &#10;    .aside section h3 &#123;float:left; width: 30%;&#125;&#10;    .aside section .inner &#123;overflow: hidden;&#125;&#10;    .aside section:after &#123;content: &#34;&#34;; display: block; height: 0; visibility: hidden; clear: both; &#125;&#10;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>大致上说一下，设定了float的元素一般会与不设定float的元素重叠，但如果不设定float的元素触发了BFC，就不会了，于是乎这里使用<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#10;&#36825;&#26679;&#20013;&#35270;&#21475;&#30340;&#24067;&#23616;&#25928;&#26524;&#23601;&#25630;&#23450;&#20102;&#65292;&#36824;&#21487;&#20197;&#21152;&#19978;&#19968;&#20123;&#39069;&#22806;&#30340;&#25928;&#26524;&#65292;&#27604;&#22914;&#20462;&#25913;&#19968;&#19979;h1~h6&#30340;&#25991;&#23383;&#22823;&#23567;&#21644;margin&#65292;&#20462;&#25913;&#19968;&#19979;&#23548;&#33322;&#26465;&#20869;&#20803;&#32032;&#30340;&#38388;&#36317;&#20043;&#31867;&#30340;&#10;&#10;###&#22823;&#35270;&#21475;&#30340;&#21464;&#38761;&#10;&#20013;&#35270;&#21475;&#21644;&#23567;&#35270;&#21475;&#32456;&#31350;&#36824;&#26159;&#19968;&#26639;&#24067;&#23616;&#65288;&#20013;&#35270;&#21475;&#34429;&#28982;&#25289;&#20986;&#20102;&#19968;&#21015;&#20165;&#26174;&#31034;&#8220;&#26597;&#30475;&#35814;&#32454;&#8221;&#25353;&#38062;&#65292;&#20294;&#26412;&#36136;&#19978;&#36824;&#26159;&#19968;&#26639;&#24067;&#23616;&#65289;&#12290;&#21040;&#20102;&#22823;&#35270;&#21475;&#65288;&#25105;&#36825;&#37324;&#23450;&#20041;&#30340;&#22823;&#35270;&#21475;&#26159;&#22823;&#20110;&#31561;&#20110;1024px&#65292;&#20063;&#23601;&#26159;64em&#30340;&#35270;&#21475;&#65292;&#20026;&#20160;&#20040;&#21602;&#65311;&#22240;&#20026;&#25105;&#30340;ipadmini &#27178;&#23631;&#26159;1024px&#65289;&#65292;&#36793;&#26639;&#24212;&#35813;&#25289;&#20986;&#26469;&#65292;&#25918;&#22312;&#23631;&#24149;&#30340;&#24038;&#36793;&#65292;&#20869;&#23481;&#22312;&#21491;&#36793;&#65292;&#21516;&#26102;footer&#24212;&#35813;&#36824;&#22312;&#26368;&#19979;&#38754;&#10;&#10;&#36824;&#26159;&#29992;&#20043;&#21069;&#31867;&#20284;&#30340;&#26041;&#24335;&#65292;&#26680;&#24515;CSS&#22914;&#19979;&#65306;&#10;```css&#10;@media screen and (min-width: 64em) &#123;&#10;    .content &#123;float:right;&#125;&#10;    .aside &#123;overflow: hidden&#125;&#10;    .footer &#123;clear:both&#125;&#10;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这样布局修改就完成了，再加上一些CSS3的animation特效，齐活</p>\n<h2 id=\"总结\">总结</h2><p>响应式页面设计还是很有意思的，逐步向上扩展，需要很明确的将各个部分划分成一块一块，方便日后响应式布局，新的页面虽然丑了点，但是还能看，有点小清新的感觉（笑），关键是加载的大小降低了很多。至于浏览器的兼容性问题，我只是兼容了比较主流的浏览器，没有兼容ie6-8这些坑货，不过无所谓了，能兼容ie9+，Chrome和Firefox、opera我就满足了，毕竟ie8压根就不支持CSS3的media queries</p>\n"}